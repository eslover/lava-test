metadata:
    format: Lava-Test Test 
    name: alpha_vte_test 
    description: "i.MX8QM Alpha VTE test"
    maintainer:
    os:
        - Linux
    scope:
        - functional
    devices:
        - imx8qm-arm2-lpddr4
install:
    git-repos:
        - https://github.com/eslover/sandbox-test
run:
    steps:
        - lava-test-case TGE-LV-KERNEL-SMP-0004 --shell ./scripts/lava-vte.sh 'dmesg| grep -Ei "WARNING|error|cut here|end trace|oops|exception|fail|duplicate" > boot_maxcpus1_error.log; [ `cat /proc/cpuinfo |grep processor|wc -l` -eq 1 ] && log_check.sh 1 boot_maxcpus1_error.log $LTPROOT/testcases/bin/core_rules.txt'
        - lava-test-case TGE-LV-FB-8003 --shell ./scripts/lava-vte.sh 'dd if=/dev/urandom of=/dev/fb0 bs=1K count=5K'
        - lava-test-case TGE-LV-MEM-0010 --shell ./scripts/lava-vte.sh 'insmod ${LTPROOT}/testcases/bin/cma_test.ko && echo 0 > /dev/cma_test && echo 0 > /dev/cma_test && cat /dev/cma_test && echo 0 > /dev/cma_test && cat /dev/cma_test && cat /dev/cma_test && rmmod cma_test'
        - lava-test-case TGE-LV-RTC-0010 --shell ./scripts/lava-vte.sh 'rtc_testapp_1'
        - lava-test-case TGE-LV-RTC-0100 --shell ./scripts/lava-vte.sh 'rtc_test.sh 2'
        - lava-test-case TGE-LV-RTC-0020 --shell ./scripts/lava-vte.sh 'rtc_testapp_4'
        - lava-test-case TGE-LV-RTC-0011 --shell ./scripts/lava-vte.sh 'rtc_testapp_2'
        - lava-test-case TGE-LV-RTC-0013 --shell ./scripts/lava-vte.sh 'rtc_testapp_5 -T POLL'

parse:
    pattern: "[ a-zA-Z]+ (?P<test_case_id>[a-zA-Z0-9]+):\\s(?P<result>PASS|FAIL|SKIP)"
