metadata:
    format: Lava-Test Test 
    name: test
    description: "Basic lava test"
    maintainer:
    os:
        - Linux
    scope:
        - functional
    devices:
        - imx6dl-sabresd
install:
    git-repos:
        - https://github.com/eslover/sandbox-test

run:
    steps:
        - lava-test-case TGE-LV-ALSA-0225 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio128k32M.wav -A'
        - lava-test-case TGE-LV-ALSA-0226 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio128k32S.wav -A'
        - lava-test-case TGE-LV-ALSA-0231 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio176k16M.wav -A'
        - lava-test-case TGE-LV-ALSA-0232 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio176k16S.wav -A'
        - lava-test-case TGE-LV-ALSA-0233 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio176k24M-S24_LE.wav -A'
        - lava-test-case TGE-LV-ALSA-0234 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio176k24S-S24_LE.wav -A'
        - lava-test-case TGE-LV-ALSA-0235 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio176k32M.wav -A'
        - lava-test-case TGE-LV-ALSA-0236 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio176k32S.wav -A'
        - lava-test-case TGE-LV-ALSA-0241 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio192k16M.wav -A'
        - lava-test-case TGE-LV-ALSA-0242 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio192k16S.wav -A'
        - lava-test-case TGE-LV-ALSA-0243 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio192k24M-S24_LE.wav -A'
        - lava-test-case TGE-LV-ALSA-0244 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio192k24S-S24_LE.wav -A'
        - lava-test-case TGE-LV-ALSA-0245 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio192k32M.wav -A'
        - lava-test-case TGE-LV-ALSA-0246 --shell ./scripts/lava-vte.sh 'dac_test1.sh -f $STREAM_PATH/alsa_stream/audio192k32S.wav -A'
        - lava-test-case TGE-LV-ALSA-0521 --shell ./scripts/lava-vte.sh 'adc_test1.sh -f S16_LE -d 5 -c 1 -r 12000 -A'
        - lava-test-case TGE-LV-SD-1010 --shell ./scripts/lava-vte.sh 'mmc_transfer.sh'
        - lava-test-case TGE-LV-ETHERNET-1000 --shell ./scripts/lava-vte.sh 'tcpdump -c 10 -i eth0'
        - lava-test-case TGE-LV-ETHERNET-1007 --shell ./scripts/lava-vte.sh 'touch readme && ftpget -u anonymous 10.192.225.218 readme readme && cat readme | grep welcome && rm readme'
        - lava-test-case TGE-LV-V4L2-1077 --shell ./scripts/lava-vte.sh '/unit_tests/mxc_v4l2_output.out -iw 352 -ih 240 -fr 80 ${LTPROOT}/testcases/bin/fb-352x240.yuv'
        - lava-test-case TGE-LV-KERNEL-10002 --shell ./scripts/lava-vte.sh 'timer_resolution'
        - lava-test-case TGE-LV-KERNEL-10005 --shell ./scripts/lava-vte.sh 'cat /proc/meminfo | grep HighTotal'
        - lava-test-case TGE-LV-ACC-0013 --shell ./scripts/lava-vte.sh 'acc_test_MMA845x_6qdl.sh -m MODE_STANDBY'
        - lava-test-case TGE-LV-STORAGE-2002 --shell ./scripts/lava-vte.sh 'storage_all.sh 2'
        - lava-test-case TGE-LV-PMICLIGHT-0091 --shell ./scripts/lava-vte.sh 'isl_test.sh 1'
        - lava-test-case TGE-LV-BENCH-10001 --shell ./scripts/lava-vte.sh 'coremark_F2.exe 0x0 0x0 0x66 0 7 1 2000 && coremark_F2.exe 0x3415 0x3415 0x66 0 7 1 2000 && coremark_F2.exe 8 8 8 0 7 1 1200'
        - lava-test-case TGE-LV-BENCH-10002 --shell ./scripts/lava-vte.sh 'coremark_P2.exe 0x0 0x0 0x66 0 7 1 2000 && coremark_P2.exe 0x3415 0x3415 0x66 0 7 1 2000 && coremark_P2.exe 8 8 8 0 7 1 1200'
        - lava-test-case TGE-LV-MAGN-0010 --shell ./scripts/lava-vte.sh 'ecompass_mag3110.sh 1'
        - lava-test-case TGE-LV-KMEM-0001 --shell ./scripts/lava-vte.sh 'insmod ${LTPROOT}/testcases/bin/memory_test.ko && rmmod memory_test'
        - lava-test-case TGE-LV-APP-0001 --shell ./scripts/lava-vte.sh 'gst-inspect'
        - lava-test-case TGE-LV-KERNEL_BOOT-0001 --shell ./scripts/lava-vte.sh 'dmesg -c'
        - lava-test-case TGE-LV-ETHERNET-1008 --shell ./scripts/lava-vte.sh 'ethtool eth0 | grep 1000'
        - lava-test-case TGE-LV-THERMO-0001 --shell ./scripts/lava-vte.sh 'if [ `uname -r` > "3.5" ]; then ls /sys/devices/soc.0/2000000.aips-bus/21bc4e0.thermal/*temp | xargs cat; else ls /sys/devices/virtual/thermal/thermal_zone0/*temp | xargs cat; fi'
        - lava-test-case TGE-LV-THERMO-0002 --shell ./scripts/lava-vte.sh 'if [ `uname -r` > "3.5" ]; then ls /sys/devices/soc.0/2000000.aips-bus/21bc4e0.thermal/*type | xargs cat; else ls /sys/devices/virtual/thermal/thermal_zone0/*type | xargs cat; fi'
        - lava-test-case TGE-LV-CORE-0001 --shell ./scripts/lava-vte.sh 'validate'
        - lava-test-case TGE-LV-OTP-0001 --shell ./scripts/lava-vte.sh 'otp_test.sh'
        - lava-test-case TGE-LV-THERMO-0004 --shell ./scripts/lava-vte.sh 'thermal_freq.sh'
        - lava-test-case TGE-LV-CORE-0002 --shell ./scripts/lava-vte.sh 'check_events'
        - lava-test-case TGE-LV-SYS_DISPLAY-0006 --shell ./scripts/lava-vte.sh 'display_stress.sh 6'
        - lava-test-case TGE-LV-ETHERNET-1009 --shell ./scripts/lava-vte.sh 'ifconfig eth0 | grep "dropped:0"'
        - lava-test-case TGE-LV-ETHERNET-1011 --shell ./scripts/lava-vte.sh 'ifconfig eth0 | grep "overruns:0"'
        - lava-test-case TGE-LV-V4L2-1078 --shell ./scripts/lava-vte.sh 'mxc_v4l2_output.sh 1'
        - lava-test-case TGE-LV-V4L2-1079 --shell ./scripts/lava-vte.sh 'mxc_v4l2_output.sh 2'
        - lava-test-case TGE-LV-V4L2-1080 --shell ./scripts/lava-vte.sh 'mxc_v4l2_output.sh 3'
        - lava-test-case TGE-LV-V4L2-1081 --shell ./scripts/lava-vte.sh 'mxc_v4l2_output.sh 4'
        - lava-test-case TGE-LV-V4L2-1082 --shell ./scripts/lava-vte.sh 'mxc_v4l2_output.sh 5'
        - lava-test-case TGE-LV-ALSA-0302 --shell ./scripts/lava-vte.sh 'list=$(ls /mnt/nfs/test_stream/alsa_stream/*.wav); aplay -N -M /mnt/nfs/test_stream/alsa_stream/*.wav'
        - lava-test-case TGE-LV-FB-1019 --shell ./scripts/lava-vte.sh 'echo 1 > /sys/class/graphics/fb0/rotate && echo q | fbv ${LTPROOT}/testcases/bin/butterfly.png'
        - lava-test-case TGE-LV-I2C-CLK-0001 --shell ./scripts/lava-vte.sh 'clk.sh i2c'
        - lava-test-case TGE-LV-ASRC-0210 --shell ./scripts/lava-vte.sh 'asrc_test1.sh -to 96000 $STREAM_PATH/asrc_stream/audio48k24S-S24_LE.wav'
        - lava-test-case TGE-LV-HRT-0020 --shell ./scripts/lava-vte.sh 'insmod ${LTPROOT}/testcases/bin/hrtimer_test.ko && sleep 1 && rmmod hrtimer_test && dmesg | grep hrtimer_callback'
        - lava-test-case TGE-LV-TIMER-FREQ-0001 --shell ./scripts/lava-vte.sh 'timer_interrupt'
        - lava-test-case TGE-LV-DVFS-0160 --shell ./scripts/lava-vte.sh 'dvfs_mx61.sh 6'
        - lava-test-case TGE-LV-PM-PCIE-0001 --shell ./scripts/lava-vte.sh 'clk.sh pcie'
        - lava-test-case TGE-LV-BENCH-10005 --shell ./scripts/lava-vte.sh 'fir_neon && fir_neon_intrisics'
        - lava-test-case TGE-LV-ASRC-0224 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 5'
        - lava-test-case TGE-LV-ASRC-0225 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 8'
        - lava-test-case TGE-LV-ASRC-0226 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 11'
        - lava-test-case TGE-LV-ASRC-0227 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 16'
        - lava-test-case TGE-LV-ASRC-0228 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 22'
        - lava-test-case TGE-LV-ASRC-0229 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 64'
        - lava-test-case TGE-LV-ASRC-0230 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 88'
        - lava-test-case TGE-LV-ASRC-0231 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 176'
        - lava-test-case TGE-LV-ASRC-0232 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh ext 192'
        - lava-test-case TGE-LV-V4L2-1072a --shell ./scripts/lava-vte.sh 'v4l_output_testapp -B -10,-10,320,240 -C 2 -F $LTPROOT/testcases/bin/yuv420'
        - lava-test-case TGE-LV-ALSA-0204 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 8000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio8k16S.wav && aplay -M -Dplughw:0 $STREAM_PATH/alsa_stream/audio8k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0205 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 11025 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio11k16S.wav && aplay -M -Dplughw:0 $STREAM_PATH/alsa_stream/audio11k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0206 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 12000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio12k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio12k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0207 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 16000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio16k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio16k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0208 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 22050 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio22k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio22k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0209 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 24000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio24k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio24k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0211 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 32000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio32k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio32k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0212 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 44100 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio44k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio44k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0213 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 48000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio48k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio48k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0214 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 64000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio64k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio64k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0215 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 88200 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio88k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio88k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0216 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 96000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio96k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio96k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0217 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 128000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio128k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio128k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0218 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 176000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio176k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio176k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-ALSA-0219 --shell ./scripts/lava-vte.sh '(arecord -D plughw:0 -r 192000 -c 2 -f S16_LE -N -M -d 20 file.wav &); aplay -Dplughw:0 $STREAM_PATH/alsa_stream/audio192k16S.wav && aplay -M -D plughw:0 $STREAM_PATH/alsa_stream/audio192k16S.wav && sleep 20 && aplay file.wav'
        - lava-test-case TGE-LV-PM-0102 --shell ./scripts/lava-vte.sh 'i=0; while [ $i -lt 3 ]; do rtc_testapp_6 -T 20 -m freeze; i=`expr $i + 1`; done'
        - lava-test-case TGE-LV-ASRC-0209 --shell ./scripts/lava-vte.sh 'asrc_grp_conv.sh 192'
        - lava-test-case TGE-LV-GPT-0011 --shell ./scripts/lava-vte.sh 'gpt_test_pm.sh 1'
        - lava-test-case TGE-LV-VPU-0001 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 1'
        - lava-test-case TGE-LV-VPU-0002 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 2'
        - lava-test-case TGE-LV-VPU-0004 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 4'
        - lava-test-case TGE-LV-VPU-0005 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 5'
        - lava-test-case TGE-LV-VPU-0006 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 6'
        - lava-test-case TGE-LV-VPU-0007 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 7'
        - lava-test-case TGE-LV-VPU-0008 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 8'
        - lava-test-case TGE-LV-VPU-1011 --shell ./scripts/lava-vte.sh 'vpu_multi_dec_test.sh 1'
        - lava-test-case TGE-LV-VPU-0009 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 9'
        - lava-test-case TGE-LV-VPU-1010 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 10'
        - lava-test-case TGE-LV-VPU-0010 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 11'
        - lava-test-case TGE-LV-VPU-1012 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 12'
        - lava-test-case TGE-LV-VPU-1013 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 13'
        - lava-test-case TGE-LV-VPU-1015 --shell ./scripts/lava-vte.sh 'vpu_multi_dec_test.sh 2'
        - lava-test-case TGE-LV-VPU-1016 --shell ./scripts/lava-vte.sh 'vpu_multi_dec_test.sh 3'
        - lava-test-case TGE-LV-VPU-20002 --shell ./scripts/lava-vte.sh 'vpu_app_test.sh 2'
        - lava-test-case TGE-LV-VPU-1017 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 15'
        - lava-test-case TGE-LV-VPU-1018 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 16'
        - lava-test-case TGE-LV-VPU-CLOCK-0001 --shell ./scripts/lava-vte.sh 'clk.sh vpu'
        - lava-test-case TGE-LV-VPU-1019 --shell ./scripts/lava-vte.sh 'vdoa=`find /sys/ -name "mxc_vdoa"` && cat $vdoa/*.vdoa/modalias && cat $vdoa/*.vdoa/uevent'
        - lava-test-case TGE-LV-VPU-0016 --shell ./scripts/lava-vte.sh 'vpu_dec_test.sh 16'
        - lava-test-case TGE-LV-VPU-2013 --shell ./scripts/lava-vte.sh '/unit_tests/mxc_vpu_test.out -D "-i /mnt/nfs/test_stream/video/TB_to_BT.mpeg2 -f 4" && /unit_tests/mxc_vpu_test.out -D "-i /mnt/nfs/test_stream/video/TB_to_BT.mpeg2 -f 4" | grep "total fps=" | grep 30'
        - lava-test-case TGE-LV-VPU-10000 --shell ./scripts/lava-vte.sh 'vpu_enc_test.sh 1'
        - lava-test-case TGE-LV-VPU-10010 --shell ./scripts/lava-vte.sh 'vpu_enc_test.sh 2'
        - lava-test-case TGE-LV-VPU-10020 --shell ./scripts/lava-vte.sh 'vpu_enc_test.sh 3'
        - lava-test-case TGE-LV-VPU-10030 --shell ./scripts/lava-vte.sh 'vpu_enc_test.sh 4'
        - lava-test-case TGE-LV-VPU-10040 --shell ./scripts/lava-vte.sh 'vpu_enc_test.sh 5'
        - lava-test-case TGE-LV-VPU-10210 --shell ./scripts/lava-vte.sh 'vpu_multi_enc_test.sh 1'
        - lava-test-case TGE-LV-VPU-10220 --shell ./scripts/lava-vte.sh 'vpu_multi_enc_test.sh 2'
        - lava-test-case TGE-LV-VPU-1020 --shell ./scripts/lava-vte.sh 'vpu_pm_test.sh 1'
        - lava-test-case TGE-LV-VPU-1030 --shell ./scripts/lava-vte.sh 'vpu_pm_test.sh 2'
        - lava-test-case TGE-LV-VPU-10221 --shell ./scripts/lava-vte.sh 'vpu_multi_enc_test.sh 3'

parse:
    pattern: "[ a-zA-Z]+ (?P<test_case_id>[a-zA-Z0-9]+):\\s(?P<result>PASS|FAIL|SKIP)"
